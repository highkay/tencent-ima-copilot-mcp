# IMA Copilot MCP 服务器配置文件
# 复制此文件为 .env 并填入实际的配置值

# ===== IMA API 认证配置 =====

# 完整的 Cookie 字符串（现在不是必需的，可以留空）
# 如果提供，会用于增强认证，但不是必需的
# 示例格式: sessionid=abc123; csrftoken=def456; pt2gguin=o123456; ...
# IMA_COOKIES="RK=VG/JI4ujMX; ptcz=12aca7ecc7499cd96a9357c4b046bd8e749dcc3a58da0e404f3711e20d7c6416; pac_uid=0_SXXdArDX8tyWm; _qimei_uuid42=192060d170810028d7679a3ff477b26e031a2b967b; _qimei_q36=; _qimei_h38=883ea7caa3c7b03e3188beb60200000f018409; pgv_pvid=6445516225; pgv_info=ssid=s3779671256; pgv_pvi=9874880512; pgv_si=s9328678912; _qpsvr_localtk=0.5307236362588797; uin=o0617502063; skey=@rbO8x2wtb; _clck=3913588561|1|fzl|0; _qimei_i_3=73fd5dd0955a56d29796f7630fd176b3f2eef5f6430d0bd0b0d92a5e239b226c653035943c89e2d48b9f; _qimei_fingerprint=66b6d2b7f85e1eaa4a5ca7d8a577cb5a"

# 必需：IMA 平台相关的请求头
# 格式: platform=1;client_version=1.0.0;platform_param=value
IMA_X_IMA_COOKIE="PLATFORM=H5; CLIENT-TYPE=256053; WEB-VERSION=999.999.999; IMA-GUID=guid-883ea7caa3c7b03e3188beb60200000f018409; IMA-Q36=883ea7caa3c7b03e3188beb60200000f018409; IMA-IUA=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36 Edg/141.0.0.0; IMA-UID=0019cdbbf48060e9; IMA-TOKEN=pPu0y5Ktq4qv9aSEI+wIrEMz/icOT/f9nVVQx+B1HYOWOOY03hWy/PGYTdsWpgLORVK0qo8ZZbTxO14+L5dNJ9TRU/nrpy0VOSGi7pixZpvQE9iLQPY7KpMSs63LHvcCTn1bt04ywSm6P1+vFFyrI0vHSlud+XMhcQUbBpW3f60QJA==; IMA-REFRESH-TOKEN=oTnsm4CdhNP4T6fBah7zv1kkSZEidkGygqc0Z7DR4bli+X9tWXN0O5GkvetPKHH6PdZB98DN6Nk25xwV7KMm/k0RpEKKr1dh3n7XQB2wFCvXmVDcOcvx4uNddL057q74JFHC0Do6mMO4/ifgEbr61UFaK4yEfTpoIw9ENHus/BaE5J0IdAZVNtXDSRWlH5VF1rpSJNNB; UID-TYPE=2; TOKEN-TYPE=14"

# 必需：IMA 业务密钥，用于请求签名
IMA_X_IMA_BKN="1842948893"

# 必需：知识库ID（从 init.txt 中获取）
IMA_KNOWLEDGE_BASE_ID="7305806844290061"

# 设备唯一标识符（可选，如果不提供会自动生成）
# IMA_USKEY="your_uskey_here"

# 客户端ID（可选，如果不提供会自动生成）
# IMA_CLIENT_ID="your_client_id_here"

# ===== 服务器配置 =====

# MCP 服务器监听地址
IMA_MCP_HOST=127.0.0.1

# MCP 服务器监听端口
IMA_MCP_PORT=8081

# 调试模式 (true/false)
IMA_MCP_DEBUG=false

# 日志级别 (DEBUG, INFO, WARNING, ERROR)
IMA_MCP_LOG_LEVEL=INFO

# 日志文件路径 (可选，不设置则输出到控制台)
# IMA_MCP_LOG_FILE=logs/ima_mcp.log

# ===== IMA API 配置 =====

# IMA API 端点URL
IMA_API_ENDPOINT=https://ima.qq.com/cgi-bin/assistant/qa

# 请求超时时间（秒）
IMA_REQUEST_TIMEOUT=30

# 重试次数
IMA_RETRY_COUNT=3

# 代理设置 (可选)
# IMA_PROXY=http://proxy.example.com:8080

# ===== 安全配置 =====

# 加密密钥 (建议修改为随机字符串)
IMA_MCP_SECRET_KEY="your-secret-key-change-in-production"

# ===== 配置获取指南 =====

# 1. 在浏览器中打开 IMA Copilot Web 版
# 2. 按 F12 打开开发者工具
# 3. 切换到 Network (网络) 标签页
# 4. 在 IMA 中发送一条消息
# 5. 在网络请求中找到发送到 ima.qq.com 的请求
# 6. 查看请求头中的 X-Ima-Cookie 字段，复制内容到 IMA_X_IMA_COOKIE（必需）
# 7. 查看请求头中的 X-Ima-Bkn 字段，复制内容到 IMA_X_IMA_BKN（必需）
# 8. 可选：查看请求头中的 Cookie 字段，复制完整内容到 IMA_COOKIES（可以增强认证，但不是必需的）

# 注意：现在只需要 IMA_X_IMA_COOKIE 和 IMA_X_IMA_BKN 两个环境变量即可正常运行！

# ===== 启动方式 =====

# 直接启动 MCP 服务器:
# python ima_server_mcp.py

# 或使用 fastmcp 命令:
# fastmcp run ima_server_mcp.py:mcp --transport http --host 127.0.0.1 --port 8081

# 使用 MCP Inspector 连接:
# npx @modelcontextprotocol/inspector
# 然后连接到: http://127.0.0.1:8081/mcp